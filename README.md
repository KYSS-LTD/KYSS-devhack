# QuizBattle

> –ö–æ–º–∞–Ω–¥–Ω–∞—è –≤–µ–±-–≤–∏–∫—Ç–æ—Ä–∏–Ω–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è —Ö–∞–∫–∞—Ç–æ–Ω–æ–≤, —à–∫–æ–ª, –∫–æ–ª–ª–µ–¥–∂–µ–π –∏ —Ç–∏–º–±–∏–ª–¥–∏–Ω–≥–æ–≤.

**–î–æ–º–µ–Ω –ø—Ä–æ–µ–∫—Ç–∞:** `quizbattle.kyssltd.ru`  
**–ö–æ–º–∞–Ω–¥–∞:** **KYSS LTD**

---

## üöÄ –ß—Ç–æ —Ç–∞–∫–æ–µ QuizBattle

**QuizBattle** ‚Äî —ç—Ç–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –≥–¥–µ –≤–µ–¥—É—â–∏–π —Å–æ–∑–¥–∞—ë—Ç –∏–≥—Ä—É –ø–æ —Ç–µ–º–µ, —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∑–∞—Ö–æ–¥—è—Ç –ø–æ PIN-–∫–æ–¥—É –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ª—è—Ç—Å—è –Ω–∞ –¥–≤–µ –∫–æ–º–∞–Ω–¥—ã. –ö–æ–º–∞–Ω–¥—ã –ø–æ –æ—á–µ—Ä–µ–¥–∏ –æ—Ç–≤–µ—á–∞—é—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã, –∞ —Å—á—ë—Ç –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

–ü—Ä–æ–µ–∫—Ç –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ –±—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫, –ø–æ–Ω—è—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ —Å—Ç–∞–±–∏–ª—å–Ω—É—é –∏–≥—Ä–æ–≤—É—é –º–µ—Ö–∞–Ω–∏–∫—É.

---

## ‚ú® –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è

- **–†–µ–∞–ª—Ç–∞–π–º-–∏–≥—Ä–∞** –Ω–∞ WebSocket: —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤.
- **–ë—ã—Å—Ç—Ä—ã–π –≤—Ö–æ–¥ –≤ –∏–≥—Ä—É:** join –ø–æ 6-—Å–∏–º–≤–æ–ª—å–Ω–æ–º—É PIN.
- **–ö–æ–º–∞–Ω–¥–Ω—ã–π —Ä–µ–∂–∏–º 2x2+** —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –∏–≥—Ä–æ–∫–æ–≤ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º.
- **–ü–æ–ª–Ω—ã–π –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª:** lobby ‚Üí –∏–≥—Ä–∞ ‚Üí –ø–æ–¥—Å—á—ë—Ç –æ—á–∫–æ–≤ ‚Üí –ø–æ–±–µ–¥–∏—Ç–µ–ª—å/–Ω–∏—á—å—è.
- **AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤** —Å –±–µ–∑–æ–ø–∞—Å–Ω—ã–º fallback –Ω–∞ –∑–∞–ø–∞—Å–Ω–æ–π –Ω–∞–±–æ—Ä –≤–æ–ø—Ä–æ—Å–æ–≤.
- **–ü—Ä–æ—Ñ–∏–ª–∏ –∏ —Ä–µ–π—Ç–∏–Ω–≥:** —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–≤—Ö–æ–¥, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –ª–∏–¥–µ—Ä–±–æ—Ä–¥.
- **–¢—ë–º–Ω–∞—è/—Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞** –∏ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è desktop/mobile.
- **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –¥–µ–ø–ª–æ—é:** Docker + Nginx-–∫–æ–Ω—Ñ–∏–≥ –ø–æ–¥ production-–¥–æ–º–µ–Ω.

---

## üß© –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### –û—Å–Ω–æ–≤–Ω–æ–π
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (`/register`, `/login`, `/auth/*`).
- –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã (—Ç–µ–º–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤, —Å–ª–æ–∂–Ω–æ—Å—Ç—å).
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ PIN (`6` —Å–∏–º–≤–æ–ª–æ–≤, –±—É–∫–≤—ã+—Ü–∏—Ñ—Ä—ã).
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤ –ø–æ PIN.
- –ê–≤—Ç–æ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º A/B.
- –õ–æ–±–±–∏ —Å –æ–∂–∏–¥–∞–Ω–∏–µ–º –∏ —Å—Ç–∞—Ä—Ç–æ–º –∏–≥—Ä—ã –≤–µ–¥—É—â–∏–º.
- –ü–æ–æ—á–µ—Ä—ë–¥–Ω—ã–µ —Ö–æ–¥—ã –∫–æ–º–∞–Ω–¥.
- –í–æ–ø—Ä–æ—Å—ã —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –æ—Ç–≤–µ—Ç–æ–≤, —Ç–∞–π–º–µ—Ä–æ–º –∏ –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏.
- –ü–æ–¥—Å—á—ë—Ç –æ—á–∫–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è/–Ω–∏—á—å–µ–π.
- –£–¥–∞–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞ –∏–∑ –∏–≥—Ä—ã –ø—Ä–∏ –¥–∏—Å–∫–æ–Ω–Ω–µ–∫—Ç–µ.

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ
- AI-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ (—Å fallback).
- –ü—Ä–æ—Ñ–∏–ª—å –∏–≥—Ä–æ–∫–∞ —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π.
- –†–µ–π—Ç–∏–Ω–≥ –∏–≥—Ä–æ–∫–æ–≤.
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UI (Tailwind-–ø–æ–¥—Ö–æ–¥, light/dark, UX-—É–ª—É—á—à–µ–Ω–∏—è).

---

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend
- Python 3.12
- FastAPI
- WebSockets
- SQLAlchemy
- SQLite

### Frontend
- HTML5
- Tailwind CSS (—á–µ—Ä–µ–∑ CDN)
- JavaScript (ES6+)

### Infra / Deploy
- Docker
- Docker Compose
- Nginx (reverse proxy)

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
app/
  main.py
  routers.py
  database.py
  models.py
  schemas.py
  services/
    auth_service.py
    ai_service.py
    game_service.py
  templates/
    index.html
    login.html
    register.html
    profile.html
    rating.html
    game.html
  static/
    css/
    js/
    imgs/

deploy/
  nginx/
    kyss.conf

Dockerfile
docker-compose.yml
requirements.txt
README.md
```

---

## ‚öôÔ∏è –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ

```bash
python3.12 -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
uvicorn app.main:app --reload
```

–û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `http://127.0.0.1:8000`

---

## üê≥ –î–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ Docker + Nginx

–í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —É–∂–µ –µ—Å—Ç—å:
- `Dockerfile` ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å FastAPI (uvicorn)
- `docker-compose.yml` ‚Äî —Å–µ—Ä–≤–∏—Å—ã `app` + `nginx`
- `deploy/nginx/kyss.conf` ‚Äî reverse proxy –∫–æ–Ω—Ñ–∏–≥

### 1) –ü–æ–¥–Ω—è—Ç—å —Å—Ç–µ–∫

```bash
docker compose up -d --build
```

### 2) –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

```bash
docker compose ps
```

### 3) –î–æ–º–µ–Ω

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–æ –Ω–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏—é –ø–æ –¥–æ–º–µ–Ω—É:

- **`quizbattle.kyssltd.ru`**

–î–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ:
1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å DNS A-–∑–∞–ø–∏—Å—å –¥–æ–º–µ–Ω–∞ –Ω–∞ IP —Å–µ—Ä–≤–µ—Ä–∞.
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–æ—Ä—Ç—ã `80/443` –¥–æ—Å—Ç—É–ø–Ω—ã –∏–∑–≤–Ω–µ.
3. (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) –¥–æ–±–∞–≤–∏—Ç—å TLS/HTTPS —á–µ—Ä–µ–∑ certbot –∏–ª–∏ –≤–Ω–µ—à–Ω–∏–π ingress.

---

## üîê –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (AI)

```bash
TIMEWEB_API_KEY="YOUR_KEY_HERE"
TIMEWEB_API_BASE=https://agent.timeweb.cloud/api/v1/cloud-ai/agents/696c108a-b9f3-4c1b-ad84-bf2209a2168f/v1
TIMEWEB_MODEL=grok-4-fast
TIMEWEB_TIMEOUT=40
```

–ï—Å–ª–∏ AI –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∑–∞–ø–∞—Å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã.

---

## üåê –û—Å–Ω–æ–≤–Ω—ã–µ API

- `POST /auth/register`
- `POST /auth/login`
- `GET /users/{user_id}/stats`
- `POST /games`
- `POST /games/{pin}/join`
- `POST /games/{pin}/start`
- `GET /games/{pin}`
- `WS /ws/{pin}/{player_id}`

---

## üë• –ö–æ–º–∞–Ω–¥–∞

**KYSS LTD**

–°–ø–∞—Å–∏–±–æ –∑–∞ –∏–Ω—Ç–µ—Ä–µ—Å –∫ –ø—Ä–æ–µ–∫—Ç—É **QuizBattle**! üöÄ
